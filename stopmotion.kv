#:kivy 2.1.0
#:set font_size 12
#:set font_size_bigger 16

<FilmStrip>:
    size_hint: (1, None)
    height: dp(60)
    bar_width: dp(15)
    bar_color: 1, 1, 1, 0.3   # red
    bar_inactive_color: 1, 1, 1, 0   # blue
    scroll_type: ['bars', 'content']
    GridLayout:
        id: _layout
        rows: 1
        spacing: 10
        size_hint_x: None
        width: self.minimum_width
        
                 
<Chooser@Spinner>:
    height: "30dp"
    size_hint:(1,None)
    text: 'Home'
    values: 'Home', 'Work', 'Other', 'Custom'
    on_text:
        print("The spinner {} has text {}".format(self, self.text))

<KivyCV>:
    
<SmallLabel@Label>:
    height: "30dp"
    size_hint: (1,None)

<SectionLabel@Label>:
    size_hint:(1, None)
    height: dp(30)
    font_size: dp(font_size_bigger)
    valign: 'bottom'
    bold: True

<PreviewVideo>:
    orientation: "vertical"
    id: _preview_video
    VideoPlayer:
        id: _video_player
        options: {"allow_stretch": True}
    Button:
        id: _video_preview_button
        text: "Close Preview"
        size_hint: (None, None)
        pos_hint: {"center_x": 0.5}

<PictureButton>:
    group: 'pictures'
    text: 'test'


<LoadDialog>:
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
            path: "./projects/"

        BoxLayout:
            size_hint_y: None
            height: dp(30)
            Button:
                text: "Cancel"
                on_release: root.cancel()

            Button:
                text: "Load"
                on_release: root.load(filechooser.path, filechooser.selection)

<LiveButton>:

<AppLayout>:
    orientation: 'horizontal'
    spacing: "5dp"
    padding: "5dp"
    BoxLayout:
        id: _first_box
        orientation: 'vertical'
        spacing: "5dp"
        padding: "5dp"
        KivyCV:
            id: _camera_view
            size_hint: (1,1)
        FilmStrip
            id: _film_strip
    BoxLayout:
        orientation: 'vertical'
        width: "180dp"
        height: "720dp"
        size_hint: (None, None)
        pos_hint: {'center_y': 0.5}
        StackLayout:
            orientation: 'lr-tb'
            spacing: "5dp"
            padding: "5dp"
            size_hint: ( 1, 1)         
            SectionLabel:
                text: "Project"
            Button:
                id: _load_button
                text: "Open folder"
                font_size: dp(font_size)
                size_hint: (1,None)
                height: dp(30)
            Button:
                id: _export_button
                text: "Export files"
                font_size: dp(font_size)
                size_hint: (1, None)
                height: dp(30)
        SectionLabel:
            text: "Camera Settings"
            
        GridLayout:
            rows: 3
            cols: 2
            spacing: "5dp"
            padding: "5dp"
            width: "240dp"
            SmallLabel:
                text: "F-stop"
                font_size: dp(font_size)
                size_hint: (1, None)
                height: dp(20)
            Chooser:
                id: _fstop_chooser
                font_size: dp(font_size)
        
            SmallLabel:
                text: "Shutter"
                font_size: dp(font_size)
                size_hint: (1, None)
                height: dp(20)
            Chooser:
                id: _shutter_speed_chooser
                font_size: dp(font_size)
        
            SmallLabel:
                text: "ISO"
                font_size: dp(font_size)
                size_hint: (1, None)
                height: dp(20)
            Chooser:
                id: _iso_chooser
                font_size: dp(font_size)

        StackLayout:
            orientation: 'lr-bt'
            size_hint: (1, 1)
            padding: dp(5)
            spacing: dp(5)
            Button:
                id: _capture_button
                text: "Capture"
                font_size: dp(font_size)
                size_hint: (1, None)
                height: dp(30)
            LiveButton:
                id: _live_button
                text: "Live"
                font_size: dp(font_size)
                size_hint: (1, None)
                height: dp(30)
                state: 'down'
            SectionLabel:
                text: "Actions"
        StackLayout:
            orientation: 'lr-bt'
            spacing: "5dp"
            padding: "5dp"
            Button:
                id: _preview_button
                text: "Preview"
                font_size: dp(font_size)
                height: dp(30)
                size_hint: (1, None)
            Slider:
                id: _fps_slider
                min: 2
                max: 30
                step: 0.5
                orientation: 'horizontal'
                height: dp(32)
                size_hint: (1, None)
                cursor_size: (dp(16), dp(16))
                padding: dp(8)
            Label:
                text: f"fps: {str(_fps_slider.value)}"
                font_size: dp(font_size)
                height: dp(24)
                size_hint: (1, None)
            SectionLabel:
                text: "Preview"



        